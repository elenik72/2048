!function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";t.r(e);t(1);let r={x:0,y:0},i=Object.assign({},r);const o=n=>{i={...i,x:n.screenX,y:n.screenY}};async function a(){await new Promise(n=>setTimeout(n,250)),s.clearChildNode(),s.render()}const s=new class{constructor(){this.container=document.getElementById("playfield"),this.field=Array.from(Array(4),()=>new Array(4).fill({number:0,position:{top:0,left:0},isChange:!1})),this.copyField=[...this.field],this.y=Math.floor(4*Math.random()),this.x=Math.floor(4*Math.random()),this.eatFlag=!1,this.count=0,this.random(),this.render()}checkRand(n,e){if(this.field[n][e].number>0)return!0}random(){do{this.y=Math.floor(4*Math.random()),this.x=Math.floor(4*Math.random())}while(this.checkRand(this.y,this.x));this.field[this.y][this.x]={number:Math.floor(Math.random()+2),position:{top:100*this.y,left:100*this.x},isChange:!1}}clear(n,e){this.field[n][e]={number:0,position:{top:0,left:0},isChange:!1}}clearChildNode(){for(let n=this.container.childNodes.length-1;n>=0;n--)this.container.childNodes[n].classList&&"thing"===this.container.childNodes[n].classList[0]&&this.container.removeChild(this.container.childNodes[n])}randomView(){this.eatFlag&&this.random(),this.eatFlag=!1}moving(n){let e,t,r,i,o,s,c,l,d;switch(n){case"up":e=0,i=4,t=0,r=4,o="vector >= 0",s=0,l=-1,c=-1,d=-1;break;case"down":e=3,i=0,t=3,r=0,o="vector < SIZE_HEIGHT",s=3,l=1,c=1,d=1;break;case"right":e=3,i=0,t=3,r=0,o="vector < SIZE_WIDTH",s=3,c=1,l=-1,d=1;break;case"left":e=0,i=4,t=3,r=0,o="vector >= 0",s=0,c=1,l=1,d=-1}for(let f=e;d<0?f<i:f>=i;f+=-1*d){for(let e=t;c<0?e<r:e>=r;e+=-1*c){let t="up"===n||"down"===n,r=t?f:e,i=t?e:f;if(this.field[r][i].number>0&&this.field[r][i].number<2048){let n=this.field[r][i].number,a=this.field[r][i].position.top,c=this.field[r][i].position.left,u=document.getElementById(`${r}${i}`).style;this.clear(r,i);let h=f;for(;o;h+=d){let r=t?e:h+1*d,i=t?h+1*d:e,o=t?e:h,f=t?h:e;if(h!==s&&this.field[i][r].number>0||h===s){let e=a,p=c;this.field[f][o]={...this.field[f][o],number:n,position:{top:t?100*f:a,left:t?c:100*o}},e=this.field[f][o].position.top,p=this.field[f][o].position.left,a===e&&p===c||(this.eatFlag=!0),t?u.top=h!==s&&!1===this.field[f][o].isChange&&!1===this.field[i][r].isChange&&this.field[f][o].number===this.field[i][r].number?100*f+100*l+"px":100*f+"px":u.left=h!==s&&!1===this.field[f][o].isChange&&!1===this.field[i][r].isChange&&this.field[f][o].number===this.field[i][r].number?100*o+100*d+"px":100*o+"px",h!==s&&this.field[f][o].number===this.field[i][r].number&&!1===this.field[f][o].isChange&&!1===this.field[i][r].isChange&&(this.clear(f,o),this.field[i][r]={...this.field[i][i],number:2*n,position:{top:t?100*f+100*l:a,left:t?c:100*o+100*d},isChange:!0},this.field[i][r].number>=2048&&(location.href="https://youtu.be/dQw4w9WgXcQ?t=85",document.getElementById("end-box").style.display="block"),a!==e&&c!==p||(this.eatFlag=!0));break}}}}a()}for(let n=0;n<4;n++)for(let e=0;e<4;e++)this.field[n][e]={...this.field[n][e],isChange:!1}}direction(){document.addEventListener("keydown",n=>{switch(n.key){case"w":this.moving("up");break;case"s":this.moving("down");break;case"d":this.moving("right");break;case"a":this.moving("left")}this.randomView()})}render(){for(let n=0;n<4;n++)for(let e=0;e<4;e++)if(this.field[n][e].number>0){let t=0===n?"0"+e:10*n+e;this.container.insertAdjacentHTML("afterBegin",`<div class="thing t${this.field[n][e].number}" id=${t} style="top: ${this.field[n][e].position.top}px; left: ${this.field[n][e].position.left}px;"></div>`)}}};s.direction(),window.addEventListener("mousedown",n=>{r={...r,x:n.screenX,y:n.screenY},window.addEventListener("mousemove",o),setTimeout(()=>{removeEventListener("mousemove",o),i.y<r.y&&i.x<r.x+30&&i.x>r.x-30?s.moving("up"):i.y>r.y&&i.x<r.x+30&&i.x>r.x-30?s.moving("down"):i.x>r.x&&i.y<r.y+30&&i.y>r.y-30?s.moving("right"):i.x<r.x&&i.y<r.y+30&&i.y>r.y-30&&s.moving("left"),s.randomView()},200)})},function(n,e,t){var r=t(2),i=t(3);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[n.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);n.exports=i.locals||{}},function(n,e,t){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}(),a=[];function s(n){for(var e=-1,t=0;t<a.length;t++)if(a[t].identifier===n){e=t;break}return e}function c(n,e){for(var t={},r=[],i=0;i<n.length;i++){var o=n[i],c=e.base?o[0]+e.base:o[0],l=t[c]||0,d="".concat(c," ").concat(l);t[c]=l+1;var f=s(d),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(a[f].references++,a[f].updater(u)):a.push({identifier:d,updater:m(u,e),references:1}),r.push(d)}return r}function l(n){var e=document.createElement("style"),r=n.attributes||{};if(void 0===r.nonce){var i=t.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(n){e.setAttribute(n,r[n])})),"function"==typeof n.insert)n.insert(e);else{var a=o(n.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var d,f=(d=[],function(n,e){return d[n]=e,d.filter(Boolean).join("\n")});function u(n,e,t,r){var i=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(n.styleSheet)n.styleSheet.cssText=f(e,i);else{var o=document.createTextNode(i),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(o,a[e]):n.appendChild(o)}}function h(n,e,t){var r=t.css,i=t.media,o=t.sourceMap;if(i?n.setAttribute("media",i):n.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}var p=null,g=0;function m(n,e){var t,r,i;if(e.singleton){var o=g++;t=p||(p=l(e)),r=u.bind(null,t,o,!1),i=u.bind(null,t,o,!0)}else t=l(e),r=h.bind(null,t,e),i=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else i()}}n.exports=function(n,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var t=c(n=n||[],e);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var r=0;r<t.length;r++){var i=s(t[r]);a[i].references--}for(var o=c(n,e),l=0;l<t.length;l++){var d=s(t[l]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}t=o}}}},function(n,e,t){(e=t(4)(!1)).push([n.i,'body {\r\n  background-color: #8080800d;\r\n}\r\n* {\r\n  -moz-user-select: none;\r\n  -khtml-user-select: none;\r\n  -ms-user-select: none;\r\n  -o-user-select: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n  -moz-user-drag: none;\r\n  -o-user-drag: none;\r\n  -khtml-user-drag: none;\r\n  -ms-user-drag: none;\r\n  user-drag: none;\r\n}\r\n#playfield {\r\n  position: relative;\r\n  width: 400px;\r\n  height: 400px;\r\n  background: #bbada0;\r\n  border: 15px solid #bbada0;\r\n  margin: 10% auto;\r\n}\r\n.back {\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  background: rgba(238, 228, 218, 0.35);\r\n  /* border-radius: 15px; */\r\n  border: 1px solid transparent;\r\n  box-shadow: inset 0px 0px 4px -4px black;\r\n}\r\n.thing {\r\n  position: absolute;\r\n  margin-top: 4px;\r\n  margin-left: 4px;\r\n  width: 94px;\r\n  height: 94px;\r\n  box-shadow: inset 0px 0px 2px -1px #431b1b;\r\n  background: transparent;\r\n  color: #fffffff2;\r\n  border-radius: 10px;\r\n  text-align: center;\r\n  font: 35px/96px Arial;\r\n  transition: top ease 0.25s, left ease 0.25s;\r\n  font-weight: 900;\r\n  z-index: 999;\r\n}\r\n.thing.t2 {\r\n  background: #519748;\r\n}\r\n.thing.t2:after {\r\n  content: "2";\r\n}\r\n.thing.t4 {\r\n  background: #65a20f;\r\n}\r\n.thing.t4:after {\r\n  content: "4";\r\n}\r\n.thing.t8 {\r\n  background: #8c8e00;\r\n}\r\n.thing.t8:after {\r\n  content: "8";\r\n}\r\n.thing.t16 {\r\n  background: #d38200;\r\n}\r\n.thing.t16:after {\r\n  content: "16";\r\n}\r\n.thing.t32 {\r\n  background: #ae3900;\r\n}\r\n.thing.t32:after {\r\n  content: "32";\r\n}\r\n.thing.t64 {\r\n  background: #931269;\r\n}\r\n.thing.t64:after {\r\n  content: "64";\r\n}\r\n.thing.t128 {\r\n  background: #2f258ff2;\r\n}\r\n.thing.t128:after {\r\n  content: "128";\r\n}\r\n.thing.t256:after {\r\n  content: "256";\r\n}\r\n.thing.t256 {\r\n  background: #4a156a;\r\n}\r\n.thing.t512:after {\r\n  content: "512";\r\n}\r\n.thing.t512 {\r\n  background: #65156a;\r\n}\r\n.thing.t1024:after {\r\n  content: "1024";\r\n}\r\n.thing.t1024 {\r\n  background: #6a1548;\r\n}\r\n.thing.t2048:after {\r\n  content: "2048";\r\n}\r\n.thing.t2048 {\r\n  background: #6a1525;\r\n}\r\n#end-box {\r\n  width: 400px;\r\n  height: 400px;\r\n  margin: 0 auto;\r\n  position: absolute;\r\n  left: calc(100% - 60rem);\r\n  z-index: 9999;\r\n  display: block;\r\n}\r\n/* и так далее */',""]),n.exports=e},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=function(n,e){var t=n[1]||"",r=n[3];if(!r)return t;if(e&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(n){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(n," */")}));return[t].concat(o).concat([i]).join("\n")}var a,s,c;return[t].join("\n")}(e,n);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,r){"string"==typeof n&&(n=[[null,n,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<n.length;s++){var c=[].concat(n[s]);r&&i[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),e.push(c))}},e}}]);